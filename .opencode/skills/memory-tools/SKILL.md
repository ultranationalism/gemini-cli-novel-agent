---
name: memory-tools
description: 三维记忆系统使用指南 - memory静态知识图谱、openmemory时间线日志、milvus向量检索的完整使用方法
license: MIT
compatibility: all
metadata:
  category: memory-management
  version: "1.0"
  author: gemini-cli-novel
---

# 记忆工具使用指南

## 概述

本系统集成了三种不同维度的记忆工具，用于构建立体化的信息管理体系。每种工具都针对特定的场景和需求，合理使用可以有效避免信息遗漏和前后矛盾。

---

## 1. memory - 静态知识图谱

### 功能定位
用于存储长期稳定的结构化知识，如实体关系、规则定义、背景设定等。

### 适用场景
- **实体关系管理**：人物关系、组织架构、地理空间等
- **规则定义**：系统规则、物理法则、专业知识等
- **背景设定**：历史背景、文化设定、技术体系等
- **核心设定**：任何需要长期保持一致性的信息

### 使用原则
- **初始化时记录**：当定义新的实体或规则时立即记录
- **更新时同步**：当关键设定发生变化时及时更新
- **避免冗余**：只记录核心的、长期有效的信息

### 典型操作
```
添加记忆：定义新实体/规则时
查询记忆：需要确认设定时
更新记忆：设定发生演变时
```

---

## 2. openmemory - 时间线日志

### 功能定位
用于记录按时间顺序发生的事件、状态变化和进展日志。

### 适用场景
- **事件日志**：记录重要事件的发生和结果
- **状态追踪**：追踪实体状态的变化历程
- **进度管理**：记录任务或项目的推进情况
- **决策记录**：记录关键决策及其理由

### 使用原则
- **定期归档**：完成一个阶段后立即记录摘要
- **包含未决事项**：记录尚未解决的问题和待处理事项
- **保持时序性**：按时间顺序组织信息
- **清理策略**：开始新阶段前根据需要清空旧记录

### 典型操作
```
写入日志：完成一个阶段后
读取日志：开始新阶段前，了解前置状态
清空记忆：开始全新任务时
```

---

## 3. milvus - 向量化知识检索

### 功能定位
通过语义向量检索相关的文本片段，用于灵感获取和参考查找。

### 适用场景
- **灵感检索**：寻找类似的表达方式或描写手法
- **参考查找**：搜索相关的案例或示例
- **风格学习**：研究特定风格的语言特点
- **知识发现**：通过语义相似性发现相关信息

### 技术要点

#### milvus_text_similarity_search 使用指南

**核心功能**：
通过输入自然语言文本（query_text），在指定的 Milvus 集合中检索语义最相关的记录。

**关键约束**（必读）：
- 参数 `anns_field` 必须填写集合中的**向量字段名**（如 `vector` 或 `embedding`）
- **绝对不能**填写原始文本字段名（如 `content` 或 `text`）
- 该工具依赖 Milvus 底层将文本与向量字段进行相似度比对
- 若填入非向量类型的字段，会导致搜索失败

**最佳实践**：
1. 执行搜索前，先调用 `milvus_get_collection_info` 工具
2. 查看集合的 Schema，确认向量类型字段（FLOAT_VECTOR）
3. 将向量字段名称填入 `anns_field` 参数

### 使用原则
- **明确检索意图**：用清晰的自然语言描述需要查找的内容
- **迭代优化查询**：根据检索结果调整查询表达
- **参考而非照搬**：从检索结果中提取思路，而非直接复制
- **验证字段类型**：使用前务必确认向量字段名称

### 典型操作
```
获取集合信息：milvus_get_collection_info
语义检索：milvus_text_similarity_search (注意 anns_field 必须是向量字段)
```

---

## 工具组合策略

### 长期项目管理
1. 使用 **memory** 维护核心设定和关系图谱
2. 使用 **openmemory** 记录每个阶段的进展和状态
3. 使用 **milvus** 检索相关的历史经验和参考资料

### 快速任务执行
1. 从 **openmemory** 获取最新的上下文
2. 从 **memory** 确认相关的规则和设定
3. 必要时通过 **milvus** 寻找参考

### 知识构建
1. 通过 **milvus** 检索相关领域的现有知识
2. 提炼核心概念存入 **memory**
3. 记录学习过程到 **openmemory**

---

## 注意事项

1. **避免工具混用**：明确每种工具的职责边界，不要在 memory 中存储临时状态
2. **保持信息一致性**：跨工具引用时要确保信息的同步更新
3. **定期维护**：及时清理过时信息，保持记忆系统的有效性
4. **验证技术参数**：特别是 milvus 的向量字段参数，使用前必须验证
